<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>后台管理</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <link href="resource/css/header.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" charset="utf-8" src="ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="ueditor.all.min.js"> </script>
    <script type="text/javascript" charset="utf-8" src="jquery1.8.3.min.js"> </script>
    <!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
    <!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
    <script type="text/javascript" charset="utf-8" src="lang/zh-cn/zh-cn.js"></script>
<style>
#main {
	width: 100%;
}

#right {
	float: right;
	background-color: #F9F9F7;
	width: 88%;

	border: 1px #FFCDB4 solid;
}



#operation ul li {
	float: left;
	list-style-type: none;
	margin-left: 5px;
}

.button {
	font-size: 12px;
	cursor: pointer;
	border: 1px solid;
	color: #FFF;
	background-color: #E78D66;
	border-radius: 5px;
	padding: 5px;
}

.button:hover {
	background-color: #E75116;
}

#operation ul li span {
	color: #CCC;
}

#operation {
	height: 30px;
}

#left ul li a {
	text-decoration: none;
	color: #000;
}

.ui-edit { /*padding-bottom: 10px;*/
	
}

.ui-edit-table {
	border: 1px solid #E8DBD5; /*#D5DFE8;//#CCCCCC;*/
	background: #FFFFFF;
	border-collapse: collapse;
}

.ui-edit-table tr th {
	background-color: #FFF0CF; /*#FFF5D0;//#F7F1EE;//#EEF3F7;*/
	text-align: right;
	font-weight: normal;
	color: #BE4211; /*#E75116;*/
}

.ui-edit-table tr td {
	text-align: left;
}

.ui-edit-table .tr .th,.ui-edit-table .tr .td {
	height: 30px;
	padding-left: 5px;
	padding-right: 5px;
	border: 1px solid #FFCDB4;
}

.ui-edit-table th.column-title {
	text-align: left;
	font-weight: bold;
}

input[type=name],input[type=email],input[type=password],input[type=text],textarea
	{
	font-family: "Helvetica Neue", Helvetica, sans-serif;
	padding: 2px;
	border: 1px solid #E8DBD5; //# ddd;
	border-radius: 2px; //
	box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1); //
	background: #FFF url(../images/input.png) repeat-x;
}

textarea {
	margin: 3px 0 3px 0;
}

input[type=name]:focus,input[type=email]:focus,input[type=password]:focus,input[type=text]:focus,textarea:focus
	{
	outline: none;
	border: 1px solid #00bce9;
	box-shadow: 0 0 2px #2da1ec;
}

.ui-edit-table tr td.operate-area {
	height: 50px;
	text-align: center;
	background-color: #FFF0CF; /*#F7F1EE;//#EEF3F7;*/
}

.none {
	width: 0px;
	height: 0px;
	display: none;
}

.address select {
		width:80px;
} 
</style>
</head>
<body>
    <div class="header">
	<div id="name_nav">
    	<div id="name">
        	后台管理
    	</div>
        <div id="nav">
        	<ul>
        		<li><a href="gateway.action">返回门户首页</a></li>
            	<li style="background-color:#BE4211;border-radius:15px 15px 15px 15px;"><a href="gateway_seeInformation.action">门户信息</a></li>
            	<li><a href="file.action">文件上传</a></li>
            	<li><a href="picture.action">开发区风采图片上传</a></li>
            	<li><a href="gateway_homeInvestmentProjects.action">投资项目</a></li>
            	<li><a href="mailbox.action">局长信箱</a></li>
            </ul>
        </div>
    </div>
</div>
<div id="main" >
	<div id="left">
		<ul>
			<div class="first">信息库管理</div>
			<li>
				<a href="gateway_seeInformation.action" style="color:#F63; font-weight:bold">门户信息</a>
			</li>
		</ul>
	</div>
    <div id="right" style="margin-top: 2px;">
    	<h1 style="text-align: center;color: #E75116;">新建标题与内容文档</h1>
    	<!-- <hr style="border: 1px solid #FFCDB4;"> -->
    	<div>
    	<table class="ui-edit-table" width="100%" border="0" cellpadding="0" cellspacing="0">
    		<thead>
    			<tr class="tr">
    				<th class="th">标题：</th>
    				<td class="td"><input type="text" name="title1" id="title1" style="width: 221px;margin-left: 0px;" /></td>
    			</tr>
    			<tr class="tr">
    				<th class="th">模块：</th>
    				<td class="td">
    					<select name="modular" id="modular" style="width: 225px;">
			    			<option value="">请选择...</option>
			    			<option value="首页-企业动态">首页-企业动态</option>
			    			<option value="首页-通知公告">首页-通知公告</option>
			    			<option value="首页-最新资讯">首页-最新资讯</option>
			    			<option value="首页-重点产业介绍">首页-重点产业介绍</option>
			    			<option value="信息公开-统计数据">信息公开-统计数据</option>
			    			<option value="信息公开-重点招商项目">信息公开-重点招商项目</option>
			    			<option value="投资服务-投资流程">投资服务-投资流程</option>
			    			<option value="投资服务-投资目录">投资服务-投资目录</option>
			    			<option value="投资服务-职能部门联系">投资服务-职能部门联系</option>
			    		</select>
    				</td>
    			</tr>
    			<tr class="tr">
    				<th class="th">内容：</th>
    				<td class="td">
    					<div style="display:none">
    						<textarea id="characterString" name="characterString" disabled="disabled" readonly="readonly" placeholder="内容不在此方框编写，在编辑器编写后保存即可！" style="width:800px;height:200px;"></textarea>
    					</div>
    					<input type="hidden" id="fieldSummary" name="fieldSummary">
    					<script id="editor" type="text/plain" style="width:1024px;height:500px;"></script>
    				</td>
    			</tr>
    			<tr class="tr">
    				<td class="td"  colspan="2">
    					<div style="margin-top: 10px;margin-bottom: 15px;text-align: center;">
						    <button class="button" type="submit" onclick="getContent();" style="width: 80px;height: 35px;font-size: 20px;">保存</button>
						</div>
    				</td>
    			</tr>
    		</thead>
    	</table>
		
</div>
<!-- <div id="btns">
    <div>
        <button onclick="getAllHtml()">获得整个html的内容</button>
        <button onclick="getContent()">获得内容</button>
        <button onclick="setContent()">写入内容</button>
        <button onclick="setContent(true)">追加内容</button>
        <button onclick="getContentTxt()">获得纯文本</button>
        <button onclick="getPlainTxt()">获得带格式的纯文本</button>
        <button onclick="hasContent()">判断是否有内容</button>
        <button onclick="setFocus()">使编辑器获得焦点</button>
        <button onmousedown="isFocus(event)">编辑器是否获得焦点</button>
        <button onmousedown="setblur(event)" >编辑器失去焦点</button>

    </div>
    <div>
        <button onclick="getText()">获得当前选中的文本</button>
        <button onclick="insertHtml()">插入给定的内容</button>
        <button id="enable" onclick="setEnabled()">可以编辑</button>
        <button onclick="setDisabled()">不可编辑</button>
        <button onclick=" UE.getEditor('editor').setHide()">隐藏编辑器</button>
        <button onclick=" UE.getEditor('editor').setShow()">显示编辑器</button>
        <button onclick=" UE.getEditor('editor').setHeight(300)">设置高度为300默认关闭了自动长高</button>
    </div>

    <div>
        <button onclick="getLocalData()" >获取草稿箱内容</button>
        <button onclick="clearLocalData()" >清空草稿箱</button>
    </div>

</div>
<div>
    <button onclick="createEditor()">
    创建编辑器</button>
    <button onclick="deleteEditor()">
    删除编辑器</button>
</div> -->
</div>
</div>


<script type="text/javascript">

    //实例化编辑器
    //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
    var ue = UE.getEditor('editor');


    function isFocus(e){
        alert(UE.getEditor('editor').isFocus());
        UE.dom.domUtils.preventDefault(e)
    }
    function setblur(e){
        UE.getEditor('editor').blur();
        UE.dom.domUtils.preventDefault(e)
    }
    function insertHtml() {
        var value = prompt('插入html代码', '');
        UE.getEditor('editor').execCommand('insertHtml', value)
    }
    function createEditor() {
        enableBtn();
        UE.getEditor('editor');
    }
    function getAllHtml() {
        alert(UE.getEditor('editor').getAllHtml())
    }
    function getContent() {
        var arr = [];
        arr.push("使用editor.getContent()方法可以获得编辑器的内容");
        arr.push("内容为：");
        arr.push(UE.getEditor('editor').getContent());
        //alert(UE.getEditor('editor').getContent());
        $("#characterString").val(UE.getEditor('editor').getContent());
        $("#fieldSummary").val(UE.getEditor('editor').getContentTxt().substr(0 , 200));
        if($("#characterString").val()==""){
        	alert("内容不能为空！");
        	return false;
        }else if($("#modular").val()==""){
        	alert("请选择模块！");
        	return false;
        }else if($("#title1").val()==""){
        	alert("标题不能为空！");
        	return false;
        }else{
	        $.ajax({
	                type:"POST",
	                url :"gateway_demo.action",
	                dataType:"json",
	                data:{
	                	"characterString":$("#characterString").val(),
	                	"modular":$("#modular").val(),
	                	"title":$("#title1").val(),
	                	"fieldSummary":$("#fieldSummary").val()
	                },
	                success:function (data) {//date是返回的结果，这里对返回值进行处理
	                if(data==true){
	                	alert("存储成功！");
	                	window.location.href = "gateway_seeInformation.action";
	                }
	                },
	                error:function(){
	                  alert("系统异常，请稍后重试！");
	                }
		       });
	    }
    }
    function getPlainTxt() {
        var arr = [];
        arr.push("使用editor.getPlainTxt()方法可以获得编辑器的带格式的纯文本内容");
        arr.push("内容为：");
        arr.push(UE.getEditor('editor').getPlainTxt());
        alert(arr.join('\n'))
    }
    function setContent(isAppendTo) {
        var arr = [];
        arr.push("使用editor.setContent('欢迎使用ueditor')方法可以设置编辑器的内容");
        UE.getEditor('editor').setContent('欢迎使用ueditor', isAppendTo);
        alert(arr.join("\n"));
    }
    function setDisabled() {
        UE.getEditor('editor').setDisabled('fullscreen');
        disableBtn("enable");
    }

    function setEnabled() {
        UE.getEditor('editor').setEnabled();
        enableBtn();
    }

    function getText() {
        //当你点击按钮时编辑区域已经失去了焦点，如果直接用getText将不会得到内容，所以要在选回来，然后取得内容
        var range = UE.getEditor('editor').selection.getRange();
        range.select();
        var txt = UE.getEditor('editor').selection.getText();
        alert(txt)
    }

    function getContentTxt() {
        var arr = [];
        arr.push("使用editor.getContentTxt()方法可以获得编辑器的纯`本内容");
        arr.push("编辑器的纯文本内容为：");
        arr.push(UE.getEditor('editor').getContentTxt());
        alert(arr.join("\n"));
    }
    function hasContent() {
        var arr = [];
        arr.push("使用editor.hasContents()方法判断编辑器里是否有内容");
        arr.push("判断结果为：");
        arr.push(UE.getEditor('editor').hasContents());
        alert(arr.join("\n"));
    }
    function setFocus() {
        UE.getEditor('editor').focus();
    }
    function deleteEditor() {
        disableBtn();
        UE.getEditor('editor').destroy();
    }
    function disableBtn(str) {
        var div = document.getElementById('btns');
        var btns = UE.dom.domUtils.getElementsByTagName(div, "button");
        for (var i = 0, btn; btn = btns[i++];) {
            if (btn.id == str) {
                UE.dom.domUtils.removeAttributes(btn, ["disabled"]);
            } else {
                btn.setAttribute("disabled", "true");
            }
        }
    }
    function enableBtn() {
        var div = document.getElementById('btns');
        var btns = UE.dom.domUtils.getElementsByTagName(div, "button");
        for (var i = 0, btn; btn = btns[i++];) {
            UE.dom.domUtils.removeAttributes(btn, ["disabled"]);
        }
    }

    function getLocalData () {
        alert(UE.getEditor('editor').execCommand( "getlocaldata" ));
    }

    function clearLocalData () {
        UE.getEditor('editor').execCommand( "clearlocaldata" );
        alert("已清空草稿箱")
    }
    
    function add(){
		$.ajax({
                type:"POST",
                url :"gateway_demo.action",
                dataType:"json",
                data:{
                	"characterString":$("#characterString").val(),
                	"modular":$("#modular").val(),
                },
                success:function (data) {//date是返回的结果，这里对返回值进行处理
                	alert("存储成功");
                	window.location.href = "gateway_seeInformation.action";
                },
                error:function(){
                  alert("系统异常，请稍后重试！");
                }
	       });
	}
	
	/* function setImagePreview() { 
		var docObj=document.getElementById("doc"); 
		var imgObjPreview=document.getElementById("preview"); 
		
		if(docObj.files && docObj.files[0]){ 
		//火狐下，直接设img属性 
		imgObjPreview.style.display = 'block'; 
		imgObjPreview.style.width = '300px'; 
		imgObjPreview.style.height = '120px'; 
		//imgObjPreview.src = docObj.files[0].getAsDataURL(); 
		//火狐7以上版本不能用上面的getAsDataURL()方式获取，需要一下方式 
		imgObjPreview.src = window.URL.createObjectURL(docObj.files[0]);
		alert(imgObjPreview.src); 
		}else{ 
		//IE下，使用滤镜 
		docObj.select(); 
		var imgSrc = document.selection.createRange().text; 
		var localImagId = document.getElementById("localImag"); 
		//必须设置初始大小 
		localImagId.style.width = "250px"; 
		localImagId.style.height = "200px"; 
		//图片异常的捕捉，防止用户修改后缀来伪造图片 
		try{ 
		localImagId.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)"; 
		localImagId.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = imgSrc; 
		}catch(e){ 
		alert("您上传的图片格式不正确，请重新选择!"); 
		return false; 
		} 
		imgObjPreview.style.display = 'none'; 
		document.selection.empty(); 
		} 
		
		return true; 
	}  */ 
</script>
</body>
</html>